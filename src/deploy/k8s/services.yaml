---
apiVersion: v1
kind: Service
metadata:
  name: app-server
  namespace: doganai-compliance
  labels:
    app: app-server
spec:
  selector:
    app: app-server
  ports:
    - name: http
      port: 8001
      targetPort: 8001
    - name: metrics
      port: 9100
      targetPort: 9100
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: db-primary
  namespace: doganai-compliance
  labels:
    app: postgres
    role: primary
spec:
  selector:
    app: postgres
    role: primary
  ports:
    - name: postgres
      port: 5432
      targetPort: 5432
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: db-replica
  namespace: doganai-compliance
  labels:
    app: postgres
    role: replica
spec:
  selector:
    app: postgres
    role: replica
  ports:
    - name: postgres
      port: 5432
      targetPort: 5432
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: haproxy
  namespace: doganai-compliance
  labels:
    app: haproxy
spec:
  selector:
    app: haproxy
  ports:
    - name: app
      port: 8080
      targetPort: 8080
    - name: api
      port: 8081
      targetPort: 8081
    - name: db
      port: 5434
      targetPort: 5434
    - name: redis
      port: 6380
      targetPort: 6380
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: prometheus
  namespace: doganai-monitoring
  labels:
    app: prometheus
spec:
  selector:
    app: prometheus
  ports:
    - name: http
      port: 9090
      targetPort: 9090
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: grafana
  namespace: doganai-monitoring
  labels:
    app: grafana
spec:
  selector:
    app: grafana
  ports:
    - name: http
      port: 3000
      targetPort: 3000
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: elasticsearch
  namespace: doganai-logging
  labels:
    app: elasticsearch
spec:
  selector:
    app: elasticsearch
  ports:
    - name: http
      port: 9200
      targetPort: 9200
  type: ClusterIP
---
apiVersion: v1
kind: Service
metadata:
  name: kibana
  namespace: doganai-logging
  labels:
    app: kibana
spec:
  selector:
    app: kibana
  ports:
    - name: http
      port: 5601
      targetPort: 5601
  type: ClusterIP
