<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DoganAI Compliance Kit - Workflow Simulator</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .rtl { direction: rtl; }
        .ltr { direction: ltr; }
        .fade-in { animation: fadeIn 0.5s ease-in; }
        .slide-in { animation: slideIn 0.3s ease-out; }
        .pulse-glow { animation: pulseGlow 2s infinite; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.8); }
        }
        
        .mobile-frame {
            background: linear-gradient(145deg, #1f2937, #374151);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }
        
        .mobile-screen {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: inset 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .system-panel {
            background: linear-gradient(135deg, #0f172a, #1e293b);
            border-radius: 15px;
            border: 1px solid #334155;
        }
        
        .progress-step {
            transition: all 0.3s ease;
        }
        
        .progress-step.active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            transform: scale(1.05);
        }
        
        .progress-step.completed {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .event-log {
            max-height: 300px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #4b5563 #1f2937;
        }
        
        .event-log::-webkit-scrollbar {
            width: 6px;
        }
        
        .event-log::-webkit-scrollbar-track {
            background: #1f2937;
        }
        
        .event-log::-webkit-scrollbar-thumb {
            background: #4b5563;
            border-radius: 3px;
        }
        
        .brand-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .success-gradient {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        }
    </style>
</head>
<body class="bg-gray-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Translations
        const translations = {
            en: {
                title: "DoganAI Compliance Kit - Workflow Simulator",
                userScreen: "User Screen - Mobile",
                systemView: "System & Team View",
                compactMode: "Compact Mode",
                language: "Language",
                welcome: "Welcome to DoganAI",
                signUp: "Sign Up",
                projectIntake: "Project Intake",
                aiAssistant: "AI Assistant",
                reviewPolicies: "Review & Policies",
                payment: "Payment",
                completion: "Completion",
                getStarted: "Get Started",
                next: "Next",
                previous: "Previous",
                complete: "Complete",
                eventLog: "Event Log",
                systemStatus: "System Status",
                journeyMap: "Journey Map",
                online: "Online",
                processing: "Processing",
                ready: "Ready",
                downloadReceipt: "Download Receipt",
                escalateToHuman: "Escalate to Human",
                welcomeDesc: "Your AI-powered compliance solution",
                signUpDesc: "Create your account to get started",
                projectDesc: "Tell us about your compliance needs",
                aiDesc: "Our AI assistant will guide you",
                reviewDesc: "Review policies and recommendations",
                paymentDesc: "Secure payment processing",
                completionDesc: "Your compliance journey is complete"
            },
            ar: {
                title: "مجموعة دوجان للامتثال الذكي - محاكي سير العمل",
                userScreen: "شاشة المستخدم - الهاتف المحمول",
                systemView: "عرض النظام والفريق",
                compactMode: "الوضع المضغوط",
                language: "اللغة",
                welcome: "مرحباً بك في دوجان الذكي",
                signUp: "إنشاء حساب",
                projectIntake: "استقبال المشروع",
                aiAssistant: "المساعد الذكي",
                reviewPolicies: "مراجعة السياسات",
                payment: "الدفع",
                completion: "الإنجاز",
                getStarted: "ابدأ الآن",
                next: "التالي",
                previous: "السابق",
                complete: "إكمال",
                eventLog: "سجل الأحداث",
                systemStatus: "حالة النظام",
                journeyMap: "خريطة الرحلة",
                online: "متصل",
                processing: "قيد المعالجة",
                ready: "جاهز",
                downloadReceipt: "تحميل الإيصال",
                escalateToHuman: "تصعيد لمشغل بشري",
                welcomeDesc: "حلول الامتثال المدعومة بالذكاء الاصطناعي",
                signUpDesc: "أنشئ حسابك للبدء",
                projectDesc: "أخبرنا عن احتياجات الامتثال الخاصة بك",
                aiDesc: "سيقوم مساعدنا الذكي بإرشادك",
                reviewDesc: "مراجعة السياسات والتوصيات",
                paymentDesc: "معالجة دفع آمنة",
                completionDesc: "رحلة الامتثال الخاصة بك مكتملة"
            }
        };

        // Workflow steps
        const workflowSteps = [
            { id: 'welcome', icon: 'fas fa-home', color: 'bg-blue-500' },
            { id: 'signUp', icon: 'fas fa-user-plus', color: 'bg-green-500' },
            { id: 'projectIntake', icon: 'fas fa-clipboard-list', color: 'bg-purple-500' },
            { id: 'aiAssistant', icon: 'fas fa-robot', color: 'bg-indigo-500' },
            { id: 'reviewPolicies', icon: 'fas fa-shield-alt', color: 'bg-yellow-500' },
            { id: 'payment', icon: 'fas fa-credit-card', color: 'bg-red-500' },
            { id: 'completion', icon: 'fas fa-check-circle', color: 'bg-green-600' }
        ];

        // Main Workflow Simulator Component
        const WorkflowSimulator = () => {
            const [currentStep, setCurrentStep] = useState(0);
            const [language, setLanguage] = useState('en');
            const [isCompact, setIsCompact] = useState(false);
            const [eventLog, setEventLog] = useState([]);
            const [systemStatus, setSystemStatus] = useState({
                api: 'online',
                database: 'online',
                ai: 'processing',
                payment: 'ready'
            });
            const [formData, setFormData] = useState({
                email: '',
                name: '',
                company: '',
                projectType: '',
                requirements: '',
                paymentMethod: 'card'
            });
            const eventLogRef = useRef(null);

            const t = translations[language];
            const isRTL = language === 'ar';

            // Add event to log
            const addEvent = (type, message, details = '') => {
                const event = {
                    id: Date.now(),
                    timestamp: new Date().toLocaleTimeString(),
                    type,
                    message,
                    details
                };
                setEventLog(prev => [event, ...prev.slice(0, 49)]); // Keep last 50 events
            };

            // Navigate to step
            const navigateToStep = (stepIndex) => {
                if (stepIndex >= 0 && stepIndex < workflowSteps.length) {
                    setCurrentStep(stepIndex);
                    const step = workflowSteps[stepIndex];
                    addEvent('navigation', `Navigated to ${t[step.id]}`, `Step ${stepIndex + 1} of ${workflowSteps.length}`);
                }
            };

            // Handle form submission
            const handleFormSubmit = (stepData) => {
                setFormData(prev => ({ ...prev, ...stepData }));
                addEvent('form_submit', `Form submitted for ${t[workflowSteps[currentStep].id]}`, JSON.stringify(stepData));
                
                if (currentStep < workflowSteps.length - 1) {
                    setTimeout(() => navigateToStep(currentStep + 1), 500);
                }
            };

            // Generate receipt
            const generateReceipt = () => {
                const receiptData = {
                    id: `DOG-${Date.now()}`,
                    date: new Date().toLocaleDateString(),
                    customer: formData.name || 'Customer',
                    company: formData.company || 'Company',
                    service: 'AI Compliance Consultation',
                    amount: '$299.00',
                    status: 'Completed'
                };
                
                const receiptContent = `
DoganAI Compliance Kit - Receipt
================================
Receipt ID: ${receiptData.id}
Date: ${receiptData.date}
Customer: ${receiptData.customer}
Company: ${receiptData.company}
Service: ${receiptData.service}
Amount: ${receiptData.amount}
Status: ${receiptData.status}
================================
Thank you for choosing DoganAI!
                `;
                
                const blob = new Blob([receiptContent], { type: 'text/plain' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `DoganAI_Receipt_${receiptData.id}.txt`;
                a.click();
                URL.revokeObjectURL(url);
                
                addEvent('download', 'Receipt downloaded', receiptData.id);
            };

            // Escalate to human
            const escalateToHuman = () => {
                addEvent('escalation', 'Escalated to human operator', 'Priority: High');
                alert(isRTL ? 'تم تصعيد طلبك إلى مشغل بشري. سيتم التواصل معك قريباً.' : 'Your request has been escalated to a human operator. You will be contacted shortly.');
            };

            // Auto-scroll event log
            useEffect(() => {
                if (eventLogRef.current) {
                    eventLogRef.current.scrollTop = 0;
                }
            }, [eventLog]);

            // Initialize with welcome event
            useEffect(() => {
                addEvent('system', 'Workflow simulator initialized', 'Ready for user interaction');
            }, []);

            return (
                <div className={`min-h-screen bg-gradient-to-br from-gray-50 to-gray-200 p-4 ${isRTL ? 'rtl' : 'ltr'}`}>
                    {/* Header */}
                    <div className="mb-6">
                        <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                            <h1 className="text-2xl md:text-3xl font-bold text-gray-800">{t.title}</h1>
                            
                            <div className="flex flex-wrap gap-4">
                                {/* Compact Mode Toggle */}
                                <div className="flex items-center gap-2">
                                    <label className="text-sm font-medium text-gray-700">{t.compactMode}</label>
                                    <button
                                        onClick={() => setIsCompact(!isCompact)}
                                        className={`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${
                                            isCompact ? 'bg-blue-600' : 'bg-gray-300'
                                        }`}
                                    >
                                        <span className={`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${
                                            isCompact ? 'translate-x-6' : 'translate-x-1'
                                        }`} />
                                    </button>
                                </div>
                                
                                {/* Language Toggle */}
                                <div className="flex items-center gap-2">
                                    <label className="text-sm font-medium text-gray-700">{t.language}</label>
                                    <select
                                        value={language}
                                        onChange={(e) => setLanguage(e.target.value)}
                                        className="px-3 py-1 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    >
                                        <option value="en">English</option>
                                        <option value="ar">العربية</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    {/* Main Content */}
                    <div className={`grid gap-6 ${isCompact ? 'grid-cols-1' : 'grid-cols-1 lg:grid-cols-2'}`}>
                        {/* Left Panel - Mobile User Screen */}
                        <div className="space-y-4">
                            <h2 className="text-xl font-semibold text-gray-800 flex items-center gap-2">
                                <i className="fas fa-mobile-alt text-blue-600"></i>
                                {t.userScreen}
                            </h2>
                            
                            <div className="mobile-frame mx-auto max-w-sm">
                                <div className="mobile-screen h-96 md:h-[500px] flex flex-col">
                                    <MobileScreen 
                                        currentStep={currentStep}
                                        language={language}
                                        translations={t}
                                        isRTL={isRTL}
                                        onNavigate={navigateToStep}
                                        onFormSubmit={handleFormSubmit}
                                        onDownloadReceipt={generateReceipt}
                                        onEscalate={escalateToHuman}
                                        formData={formData}
                                    />
                                </div>
                            </div>
                        </div>

                        {/* Right Panel - System & Team View */}
                        {(!isCompact || window.innerWidth >= 1024) && (
                            <div className="space-y-4">
                                <h2 className="text-xl font-semibold text-gray-800 flex items-center gap-2">
                                    <i className="fas fa-desktop text-green-600"></i>
                                    {t.systemView}
                                </h2>
                                
                                <SystemPanel 
                                    currentStep={currentStep}
                                    language={language}
                                    translations={t}
                                    isRTL={isRTL}
                                    eventLog={eventLog}
                                    systemStatus={systemStatus}
                                    eventLogRef={eventLogRef}
                                    workflowSteps={workflowSteps}
                                />
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Mobile Screen Component
        const MobileScreen = ({ currentStep, language, translations: t, isRTL, onNavigate, onFormSubmit, onDownloadReceipt, onEscalate, formData }) => {
            const [localFormData, setLocalFormData] = useState({});
            const step = workflowSteps[currentStep];

            const handleInputChange = (field, value) => {
                setLocalFormData(prev => ({ ...prev, [field]: value }));
            };

            const handleSubmit = () => {
                onFormSubmit(localFormData);
                setLocalFormData({});
            };

            const renderStepContent = () => {
                switch (step.id) {
                    case 'welcome':
                        return (
                            <div className="text-center space-y-6 fade-in">
                                <div className="brand-gradient w-20 h-20 rounded-full mx-auto flex items-center justify-center">
                                    <i className="fas fa-rocket text-3xl text-white"></i>
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800">{t.welcome}</h2>
                                <p className="text-gray-600">{t.welcomeDesc}</p>
                                <button
                                    onClick={() => onNavigate(1)}
                                    className="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors pulse-glow"
                                >
                                    {t.getStarted}
                                </button>
                            </div>
                        );

                    case 'signUp':
                        return (
                            <div className="space-y-4 fade-in">
                                <h2 className="text-xl font-bold text-gray-800">{t.signUp}</h2>
                                <p className="text-gray-600 text-sm">{t.signUpDesc}</p>
                                
                                <div className="space-y-3">
                                    <input
                                        type="email"
                                        placeholder={isRTL ? "البريد الإلكتروني" : "Email"}
                                        value={localFormData.email || ''}
                                        onChange={(e) => handleInputChange('email', e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                    <input
                                        type="text"
                                        placeholder={isRTL ? "الاسم الكامل" : "Full Name"}
                                        value={localFormData.name || ''}
                                        onChange={(e) => handleInputChange('name', e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                    <input
                                        type="text"
                                        placeholder={isRTL ? "اسم الشركة" : "Company Name"}
                                        value={localFormData.company || ''}
                                        onChange={(e) => handleInputChange('company', e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    />
                                </div>
                                
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => onNavigate(0)}
                                        className="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors"
                                    >
                                        {t.previous}
                                    </button>
                                    <button
                                        onClick={handleSubmit}
                                        disabled={!localFormData.email || !localFormData.name}
                                        className="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        {t.next}
                                    </button>
                                </div>
                            </div>
                        );

                    case 'projectIntake':
                        return (
                            <div className="space-y-4 fade-in">
                                <h2 className="text-xl font-bold text-gray-800">{t.projectIntake}</h2>
                                <p className="text-gray-600 text-sm">{t.projectDesc}</p>
                                
                                <div className="space-y-3">
                                    <select
                                        value={localFormData.projectType || ''}
                                        onChange={(e) => handleInputChange('projectType', e.target.value)}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    >
                                        <option value="">{isRTL ? "اختر نوع المشروع" : "Select Project Type"}</option>
                                        <option value="gdpr">{isRTL ? "الامتثال لـ GDPR" : "GDPR Compliance"}</option>
                                        <option value="iso27001">{isRTL ? "شهادة ISO 27001" : "ISO 27001 Certification"}</option>
                                        <option value="sox">{isRTL ? "امتثال SOX" : "SOX Compliance"}</option>
                                        <option value="custom">{isRTL ? "متطلبات مخصصة" : "Custom Requirements"}</option>
                                    </select>
                                    
                                    <textarea
                                        placeholder={isRTL ? "وصف متطلبات الامتثال" : "Describe your compliance requirements"}
                                        value={localFormData.requirements || ''}
                                        onChange={(e) => handleInputChange('requirements', e.target.value)}
                                        rows={4}
                                        className="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"
                                    />
                                </div>
                                
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => onNavigate(1)}
                                        className="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors"
                                    >
                                        {t.previous}
                                    </button>
                                    <button
                                        onClick={handleSubmit}
                                        disabled={!localFormData.projectType}
                                        className="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                                    >
                                        {t.next}
                                    </button>
                                </div>
                            </div>
                        );

                    case 'aiAssistant':
                        return (
                            <div className="space-y-4 fade-in">
                                <h2 className="text-xl font-bold text-gray-800">{t.aiAssistant}</h2>
                                <p className="text-gray-600 text-sm">{t.aiDesc}</p>
                                
                                <div className="bg-blue-50 p-4 rounded-lg border border-blue-200">
                                    <div className="flex items-start gap-3">
                                        <div className="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0">
                                            <i className="fas fa-robot text-white text-sm"></i>
                                        </div>
                                        <div className="flex-1">
                                            <p className="text-sm text-blue-800">
                                                {isRTL 
                                                    ? "مرحباً! لقد راجعت متطلباتك وأوصي بحلول الامتثال التالية..."
                                                    : "Hello! I've reviewed your requirements and recommend the following compliance solutions..."
                                                }
                                            </p>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="space-y-2">
                                    <div className="bg-green-50 p-3 rounded-lg border border-green-200">
                                        <div className="flex items-center gap-2">
                                            <i className="fas fa-check-circle text-green-600"></i>
                                            <span className="text-sm text-green-800">
                                                {isRTL ? "تحليل المخاطر مكتمل" : "Risk analysis completed"}
                                            </span>
                                        </div>
                                    </div>
                                    <div className="bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                                        <div className="flex items-center gap-2">
                                            <i className="fas fa-exclamation-triangle text-yellow-600"></i>
                                            <span className="text-sm text-yellow-800">
                                                {isRTL ? "تم تحديد 3 مجالات تحتاج تحسين" : "3 areas identified for improvement"}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => onNavigate(2)}
                                        className="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors"
                                    >
                                        {t.previous}
                                    </button>
                                    <button
                                        onClick={() => onNavigate(4)}
                                        className="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors"
                                    >
                                        {t.next}
                                    </button>
                                </div>
                            </div>
                        );

                    case 'reviewPolicies':
                        return (
                            <div className="space-y-4 fade-in">
                                <h2 className="text-xl font-bold text-gray-800">{t.reviewPolicies}</h2>
                                <p className="text-gray-600 text-sm">{t.reviewDesc}</p>
                                
                                <div className="space-y-3">
                                    <div className="bg-white border border-gray-200 rounded-lg p-3">
                                        <div className="flex items-center justify-between">
                                            <div className="flex items-center gap-2">
                                                <i className="fas fa-file-alt text-blue-600"></i>
                                                <span className="text-sm font-medium">
                                                    {isRTL ? "سياسة حماية البيانات" : "Data Protection Policy"}
                                                </span>
                                            </div>
                                            <span className="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">
                                                {isRTL ? "موافق عليها" : "Approved"}
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div className="bg-white border border-gray-200 rounded-lg p-3">
                                        <div className="flex items-center justify-between">
                                            <div className="flex items-center gap-2">
                                                <i className="fas fa-shield-alt text-blue-600"></i>
                                                <span className="text-sm font-medium">
                                                    {isRTL ? "سياسة الأمان" : "Security Policy"}
                                                </span>
                                            </div>
                                            <span className="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">
                                                {isRTL ? "قيد المراجعة" : "Under Review"}
                                            </span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => onNavigate(3)}
                                        className="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors"
                                    >
                                        {t.previous}
                                    </button>
                                    <button
                                        onClick={() => onNavigate(5)}
                                        className="flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-blue-700 transition-colors"
                                    >
                                        {t.next}
                                    </button>
                                </div>
                            </div>
                        );

                    case 'payment':
                        return (
                            <div className="space-y-4 fade-in">
                                <h2 className="text-xl font-bold text-gray-800">{t.payment}</h2>
                                <p className="text-gray-600 text-sm">{t.paymentDesc}</p>
                                
                                <div className="bg-gray-50 p-4 rounded-lg">
                                    <div className="flex justify-between items-center mb-3">
                                        <span className="font-medium">{isRTL ? "استشارة الامتثال الذكي" : "AI Compliance Consultation"}</span>
                                        <span className="font-bold text-lg">$299.00</span>
                                    </div>
                                    <div className="text-sm text-gray-600">
                                        {isRTL ? "يشمل: تحليل المخاطر، توصيات السياسات، دعم التنفيذ" : "Includes: Risk analysis, policy recommendations, implementation support"}
                                    </div>
                                </div>
                                
                                <div className="space-y-3">
                                    <div className="flex gap-2">
                                        <button
                                            onClick={() => handleInputChange('paymentMethod', 'card')}
                                            className={`flex-1 p-3 border rounded-lg text-center transition-colors ${
                                                (localFormData.paymentMethod || 'card') === 'card'
                                                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                                                    : 'border-gray-300 hover:border-gray-400'
                                            }`}
                                        >
                                            <i className="fas fa-credit-card mb-1"></i>
                                            <div className="text-sm">{isRTL ? "بطاقة ائتمان" : "Credit Card"}</div>
                                        </button>
                                        <button
                                            onClick={() => handleInputChange('paymentMethod', 'paypal')}
                                            className={`flex-1 p-3 border rounded-lg text-center transition-colors ${
                                                localFormData.paymentMethod === 'paypal'
                                                    ? 'border-blue-500 bg-blue-50 text-blue-700'
                                                    : 'border-gray-300 hover:border-gray-400'
                                            }`}
                                        >
                                            <i className="fab fa-paypal mb-1"></i>
                                            <div className="text-sm">PayPal</div>
                                        </button>
                                    </div>
                                </div>
                                
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => onNavigate(4)}
                                        className="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors"
                                    >
                                        {t.previous}
                                    </button>
                                    <button
                                        onClick={handleSubmit}
                                        className="flex-1 bg-green-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-green-700 transition-colors"
                                    >
                                        {isRTL ? "ادفع الآن" : "Pay Now"}
                                    </button>
                                </div>
                            </div>
                        );

                    case 'completion':
                        return (
                            <div className="text-center space-y-6 fade-in">
                                <div className="success-gradient w-20 h-20 rounded-full mx-auto flex items-center justify-center">
                                    <i className="fas fa-check text-3xl text-white"></i>
                                </div>
                                <h2 className="text-2xl font-bold text-gray-800">{t.completion}</h2>
                                <p className="text-gray-600">{t.completionDesc}</p>
                                
                                <div className="space-y-3">
                                    <button
                                        onClick={onDownloadReceipt}
                                        className="w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors flex items-center justify-center gap-2"
                                    >
                                        <i className="fas fa-download"></i>
                                        {t.downloadReceipt}
                                    </button>
                                    
                                    <button
                                        onClick={onEscalate}
                                        className="w-full bg-orange-600 text-white py-3 px-6 rounded-lg font-semibold hover:bg-orange-700 transition-colors flex items-center justify-center gap-2"
                                    >
                                        <i className="fas fa-user-tie"></i>
                                        {t.escalateToHuman}
                                    </button>
                                    
                                    <button
                                        onClick={() => onNavigate(0)}
                                        className="w-full bg-gray-300 text-gray-700 py-2 px-4 rounded-lg font-medium hover:bg-gray-400 transition-colors"
                                    >
                                        {isRTL ? "ابدأ من جديد" : "Start Over"}
                                    </button>
                                </div>
                            </div>
                        );

                    default:
                        return <div>Step not found</div>;
                }
            };

            return (
                <div className="p-6 h-full flex flex-col">
                    {/* Progress Bar */}
                    <div className="mb-6">
                        <div className="flex justify-between items-center mb-2">
                            <span className="text-sm font-medium text-gray-700">
                                {isRTL ? `الخطوة ${currentStep + 1} من ${workflowSteps.length}` : `Step ${currentStep + 1} of ${workflowSteps.length}`}
                            </span>
                            <span className="text-sm text-gray-500">
                                {Math.round(((currentStep + 1) / workflowSteps.length) * 100)}%
                            </span>
                        </div>
                        <div className="w-full bg-gray-200 rounded-full h-2">
                            <div 
                                className="bg-blue-600 h-2 rounded-full transition-all duration-500"
                                style={{ width: `${((currentStep + 1) / workflowSteps.length) * 100}%` }}
                            />
                        </div>
                    </div>

                    {/* Step Content */}
                    <div className="flex-1">
                        {renderStepContent()}
                    </div>
                </div>
            );
        };

        // System Panel Component
        const SystemPanel = ({ currentStep, language, translations: t, isRTL, eventLog, systemStatus, eventLogRef, workflowSteps }) => {
            return (
                <div className="system-panel p-6 text-white">
                    {/* System Status */}
                    <div className="mb-6">
                        <h3 className="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i className="fas fa-server text-green-400"></i>
                            {t.systemStatus}
                        </h3>
                        <div className="grid grid-cols-2 gap-3">
                            {Object.entries(systemStatus).map(([key, status]) => (
                                <div key={key} className="bg-gray-800 p-3 rounded-lg">
                                    <div className="flex items-center justify-between">
                                        <span className="text-sm capitalize">{key}</span>
                                        <span className={`text-xs px-2 py-1 rounded ${
                                            status === 'online' ? 'bg-green-600' :
                                            status === 'processing' ? 'bg-yellow-600' :
                                            'bg-blue-600'
                                        }`}>
                                            {t[status] || status}
                                        </span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Journey Map */}
                    <div className="mb-6">
                        <h3 className="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i className="fas fa-route text-blue-400"></i>
                            {t.journeyMap}
                        </h3>
                        <div className="space-y-2">
                            {workflowSteps.map((step, index) => (
                                <div key={step.id} className={`progress-step p-3 rounded-lg flex items-center gap-3 ${
                                    index === currentStep ? 'active' :
                                    index < currentStep ? 'completed bg-green-600' :
                                    'bg-gray-700'
                                }`}>
                                    <i className={step.icon}></i>
                                    <span className="text-sm">{t[step.id]}</span>
                                    {index < currentStep && <i className="fas fa-check ml-auto"></i>}
                                    {index === currentStep && <i className="fas fa-spinner fa-spin ml-auto"></i>}
                                </div>
                            ))}
                        </div>
                    </div>

                    {/* Event Log */}
                    <div>
                        <h3 className="text-lg font-semibold mb-4 flex items-center gap-2">
                            <i className="fas fa-list-alt text-yellow-400"></i>
                            {t.eventLog}
                        </h3>
                        <div ref={eventLogRef} className="event-log space-y-2">
                            {eventLog.map((event) => (
                                <div key={event.id} className="bg-gray-800 p-3 rounded-lg slide-in">
                                    <div className="flex items-start justify-between">
                                        <div className="flex-1">
                                            <div className="flex items-center gap-2 mb-1">
                                                <span className={`w-2 h-2 rounded-full ${
                                                    event.type === 'system' ? 'bg-blue-400' :
                                                    event.type === 'navigation' ? 'bg-green-400' :
                                                    event.type === 'form_submit' ? 'bg-yellow-400' :
                                                    event.type === 'download' ? 'bg-purple-400' :
                                                    event.type === 'escalation' ? 'bg-red-400' :
                                                    'bg-gray-400'
                                                }`}></span>
                                                <span className="text-sm font-medium">{event.message}</span>
                                            </div>
                                            {event.details && (
                                                <p className="text-xs text-gray-400 ml-4">{event.details}</p>
                                            )}
                                        </div>
                                        <span className="text-xs text-gray-500">{event.timestamp}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        // Render the app using React 18 createRoot API
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<WorkflowSimulator />);
    </script>
</body>
</html>